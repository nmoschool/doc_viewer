<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù…Ø³ØªØ¹Ø±Ø¶ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø¯Ø±Ø³Ø© ØªØ­ÙÙŠØ¸ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¨Ø¬Ø§Ø¯ÙŠØ©</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Noto+Kufi+Arabic:wght@400;600;800;900&family=Changa:wght@300;500;700&display=swap" rel="stylesheet" />

    <style>
      /* --- Ø¯Ù…Ø¬ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙØ§Ø®Ø± Ù…Ù† mhjvg --- */
      :root {
        --gold: #d4a853;
        --gold-light: #f5e6c8;
        --navy: #0a1628;
        --navy-light: #152238;
        --navy-lighter: #1e3050;
        --teal: #2dd4bf;
        --text-light: #e8e4dc;
        --border-color: rgba(212, 168, 83, 0.2);
        --radius: 12px;
      }

      body {
        font-family: 'Noto Kufi Arabic', sans-serif;
        margin: 0; padding-top: 50px;
        background-color: var(--navy);
        color: var(--text-light);
        display: flex; min-height: 100vh; overflow-x: hidden;
      }

      body::before {
        content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(circle at 50% 50%, rgba(212, 168, 83, 0.05) 0%, transparent 80%);
        z-index: -1;
      }

      .announcement-bar {
        background: linear-gradient(90deg, #b8923a, var(--gold), #b8923a);
        color: var(--navy); text-align: center; padding: 12px;
        font-weight: 800; position: fixed; top: 0; width: 100%; z-index: 1000;
        box-shadow: 0 2px 15px rgba(0,0,0,0.4);
      }

      .container { display: flex; width: 100%; }

      /* --- Ø§Ù„Ø³Ø§ÙŠØ¯Ø¨Ø§Ø± (Ø§Ù„ÙÙ‡Ø±Ø³) --- */
      .sidebar {
        width: 380px; background-color: var(--navy-light);
        border-left: 1px solid var(--border-color);
        display: flex; flex-direction: column;
        position: sticky; top: 50px; height: calc(100vh - 50px);
      }

      .sidebar-header {
        padding: 20px; border-bottom: 1px solid var(--border-color);
        background: var(--navy-lighter);
      }

      .sidebar-header h3 {
        margin: 0 0 15px 0; font-family: 'Amiri', serif;
        color: var(--gold); font-size: 1.7rem;
      }

      #search-input, #file-filter {
        width: 100%; padding: 12px; border-radius: 8px;
        border: 1px solid var(--border-color); background: var(--navy);
        color: white; margin-bottom: 10px; box-sizing: border-box;
      }

      .table-container { flex: 1; overflow-y: auto; padding: 10px; }
      #file-table { width: 100%; border-collapse: separate; border-spacing: 0 5px; }

      .folder-header { cursor: pointer; background: rgba(45, 212, 191, 0.1); transition: 0.3s; }
      .folder-header:hover { background: rgba(45, 212, 191, 0.2); }
      .folder-title { color: var(--teal); font-weight: 800; padding: 12px !important; }

      .file-row { background: rgba(255,255,255,0.02); transition: 0.3s; cursor: pointer; }
      .file-row:hover { background: var(--navy-lighter); transform: translateX(-5px); }
      .file-row.active {
        background: linear-gradient(135deg, var(--gold), #b8923a) !important;
        color: var(--navy) !important; font-weight: bold;
      }

      .file-row td { padding: 12px; }
      .hidden-folder { display: none; }

      /* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
      .main-content { flex: 1; display: flex; flex-direction: column; padding: 25px; }

      .viewer-controls {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: 20px; background: var(--navy-light);
        padding: 20px; border-radius: 15px; border: 1px solid var(--border-color);
      }

      .header-info h2 { font-family: 'Amiri', serif; color: var(--gold-light); margin: 0; font-size: 1.5rem; }
      .programmer-credit { color: var(--teal); font-weight: 900; }

      #download-btn {
        background: linear-gradient(135deg, var(--gold), #b8923a);
        color: var(--navy); padding: 10px 25px; border-radius: 50px;
        text-decoration: none; font-weight: 800; display: none;
        box-shadow: 0 4px 15px rgba(212, 168, 83, 0.3);
      }

      #viewer {
        flex: 1; background: #fff; border-radius: 15px;
        border: 4px solid var(--gold); overflow: hidden; min-height: 500px;
        display: flex; justify-content: center; align-items: center;
      }

      iframe, video, img { width: 100%; height: 100%; border: none; }
      
      .loader-message { color: var(--navy); font-weight: bold; text-align: center; }

      @media (max-width: 768px) {
        .container { flex-direction: column; }
        .sidebar { width: 100%; height: auto; position: relative; }
      }
    </style>
  </head>
  <body>

    <div class="announcement-bar">
      ğŸ“¢ Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚ Ù„Ø·Ù„Ø§Ø¨Ù†Ø§ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø±Ø§ØªÙ‡Ù…
    </div>

    <div class="container">
      <aside class="sidebar">
        <div class="sidebar-header">
          <h3>ğŸ“‚ ÙÙ‡Ø±Ø³ Ø§Ù„Ù…Ù„ÙØ§Øª</h3>
          <select id="file-filter">
            <option value="all">ÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª</option>
            <option value="pdf">Ù…Ù„ÙØ§Øª PDF</option>
            <option value="docx">Ù…Ù„ÙØ§Øª Word</option>
            <option value="xlsx">Ù…Ù„ÙØ§Øª Excel</option>
            <option value="pptx">Ù…Ù„ÙØ§Øª PowerPoint</option>
            <option value="image">Ø§Ù„ØµÙˆØ±</option>
            <option value="video">Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</option>
            <option value="audio">Ø§Ù„ØµÙˆØª</option>
          </select>
          <input type="text" id="search-input" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù… Ù…Ù„Ù..." />
        </div>
        <div class="table-container">
          <table id="file-table">
            <tbody id="file-list"></tbody>
          </table>
        </div>
      </aside>

      <main class="main-content">
        <div class="viewer-controls">
          <div class="header-info">
            <h2>Ù…Ø³ØªØ¹Ø±Ø¶ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…Ø¯Ø±Ø³Ø© ØªØ­ÙÙŠØ¸ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø§Ù„Ø¨Ø¬Ø§Ø¯ÙŠØ©</h2>
            <span class="programmer-credit">Ø¨Ø±Ù…Ø¬Ø© :NMO </span>
          </div>
          <a href="#" id="download-btn" download>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù <i class="fa-solid fa-download"></i></a>
        </div>
        <div id="viewer">
           <div class="loader-message">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰ Ù„Ø¹Ø±Ø¶Ù‡</div>
        </div>
      </main>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const fileListContainer = document.getElementById(\"file-list\");
        const searchInput = document.getElementById(\"search-input\");
        const fileFilter = document.getElementById(\"file-filter\");
        const viewerElement = document.getElementById(\"viewer\");
        const downloadBtn = document.getElementById(\"download-btn\");

        const githubUser = \"6m6m\";
        const githubRepo = \"1school\";
        const githubBranch = \"main\";

        // --- Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒØ§ÙØ© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© ---
        const pinnedFiles = [\"Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….pdf\", \"Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ.pdf\"];
        const classFolders = [\"Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„\", \"Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ\", \"Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«\", \"Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹\", \"Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³\", \"Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³\"];
        let allFiles = [];

        async function fetchAndDisplayFiles() {
          try {
            const response = await fetch(`https://api.github.com/repos/${githubUser}/${githubRepo}/git/trees/${githubBranch}?recursive=1`);
            const data = await response.json();
            allFiles = data.tree.filter(item => item.type === \"blob\" && !item.path.startsWith('.'));
            renderFileList(allFiles);
          } catch (error) {
            viewerElement.innerHTML = \"<div class='loader-message'>Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† GitHub</div>\";
          }
        }

        function renderFileList(files) {
          fileListContainer.innerHTML = \"\";
          const groups = { \"Ø§Ù„Ù…Ø«Ø¨ØªØ© ğŸ“Œ\": [], \"Ø¹Ø§Ù…\": [] };
          classFolders.forEach(f => groups[f] = []);

          files.forEach(file => {
            const fileName = file.path.split('/').pop();
            if (pinnedFiles.includes(fileName)) {
              groups[\"Ø§Ù„Ù…Ø«Ø¨ØªØ© ğŸ“Œ\"].push(file);
            } else {
              let matched = false;
              for (let f of classFolders) {
                if (file.path.includes(f)) { groups[f].push(file); matched = true; break; }
              }
              if (!matched) groups[\"Ø¹Ø§Ù…\"].push(file);
            }
          });

          Object.keys(groups).forEach(groupName => {
            if (groups[groupName].length === 0) return;

            const hRow = document.createElement(\"tr\");
            hRow.className = \"folder-header\";
            hRow.innerHTML = `<td colspan=\"2\" class=\"folder-title\"><i class=\"fa-solid fa-folder-open\"></i> ${groupName}</td>`;
            hRow.onclick = () => toggleFolder(groupName);
            fileListContainer.appendChild(hRow);

            groups[groupName].forEach(file => {
              const tr = document.createElement(\"tr\");
              tr.className = `file-row folder-group-${groupName.replace(/\\s+/g, '')}`;
              const name = file.path.split('/').pop();
              tr.innerHTML = `<td><i class=\"${getFileIcon(name)}\"></i></td><td>${name}</td>`;
              tr.onclick = () => loadFile(file);
              fileListContainer.appendChild(tr);
            });
          });
        }

        function toggleFolder(name) {
          const className = `.folder-group-${name.replace(/\\s+/g, '')}`;
          document.querySelectorAll(className).forEach(el => el.classList.toggle('hidden-folder'));
        }

        function getFileIcon(n) {
          const ext = n.split('.').pop().toLowerCase();
          if (ext === 'pdf') return 'fa-solid fa-file-pdf';
          if (['doc', 'docx'].includes(ext)) return 'fa-solid fa-file-word';
          if (['xls', 'xlsx'].includes(ext)) return 'fa-solid fa-file-excel';
          if (['mp4', 'mov'].includes(ext)) return 'fa-solid fa-file-video';
          return 'fa-solid fa-file';
        }

        function loadFile(file) {
          const absoluteUrl = `https://raw.githubusercontent.com/${githubUser}/${githubRepo}/${githubBranch}/${file.path}`;
          const ext = file.path.split('.').pop().toLowerCase();
          
          document.querySelectorAll('.file-row').forEach(r => r.classList.remove('active'));
          event.currentTarget.classList.add('active');

          viewerElement.innerHTML = \"<div class='loader-message'>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>\";

          if (ext === 'pdf') {
            viewerElement.innerHTML = `<iframe src=\"https://docs.google.com/gview?url=${encodeURIComponent(absoluteUrl)}&embedded=true\"></iframe>`;
          } else if (['jpg', 'jpeg', 'png', 'gif'].includes(ext)) {
            viewerElement.innerHTML = `<img src=\"${absoluteUrl}\" style=\"object-fit: contain;\">`;
          } else if (['mp4', 'webm', 'ogg'].includes(ext)) {
            viewerElement.innerHTML = `<video controls><source src=\"${absoluteUrl}\" type=\"video/${ext}\"></video>`;
          } else if (['mp3', 'wav'].includes(ext)) {
            viewerElement.innerHTML = `<div style=\"padding:50px; text-align:center;\"><audio controls><source src=\"${absoluteUrl}\"></audio></div>`;
          } else {
            const officeUrl = `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(absoluteUrl)}`;
            viewerElement.innerHTML = `<iframe src=\"${officeUrl}\"></iframe>`;
          }
          
          downloadBtn.href = absoluteUrl;
          downloadBtn.style.display = \"inline-flex\";
        }

        searchInput.oninput = () => {
          const term = searchInput.value.toLowerCase();
          renderFileList(allFiles.filter(f => f.path.toLowerCase().includes(term)));
        };

        fileFilter.onchange = () => {
          const val = fileFilter.value;
          if (val === 'all') renderFileList(allFiles);
          else renderFileList(allFiles.filter(f => f.path.toLowerCase().endsWith(val)));
        };

        fetchAndDisplayFiles();
      });
    </script>
  </body>
</html>
